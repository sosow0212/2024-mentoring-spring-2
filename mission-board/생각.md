## 생각정리

### 전체적인 틀
1. 도메인형 프로젝트 구조 선택
2. exception 잘 구현하기.
3. 이론 잘 학습해서 적용하기

### 회원가입 [0]
1. 닉네임, 아이디 중복 확인하는 기능.
2. 유저 저장

### 로그인 []
1. 쿠키 로그인
2. 세션 로그인 
3. 토큰 로그인

그 어떤 로그인도 아직 감이 잡히지 않는다..... 어떤 식으로 구현해야 하지

로그인 패키지 구현
하나의 인터페이스 생성 -> 3개 클래스 구현(쿠키, 세션, 토큰)
일단 해보자!

1. 쿠키 로그아웃 작성시 사용자 정보 받아와야 할 필요가 있는데 어떤 식으로 받아와서 로그아웃 정보 던져줘야 하지? 
2. 쿠키 로그인 시, 이미 쿠키가 있다면 예외 던져줘야 하나?

 --> 꺠달았음, 데베에 쿠키 값 저장하고 로그아웃 시, 일치하는 값 찾아서 쿠키 초기화. 로그인 시 setPath() 해줘서 쿠키 값 계속 던지고 읽어들이면 됌.

* 로그인, 로그아웃 할 때 쿠키,세션 값 생성하거나 제거하는 경우 해당 메서드는 컨트롤러 단에 작성해줘야 함.
  * 레이어드 아키텍쳐 관점에서 봤을 때 : 컨트롤러(프레젠테이션) 레이어는 http 요청과 응답에 대한 로직에 관한 책임을 가지고 있음.

* 쿠키 문제점
  * 쿠키 값을 임의대로 변경할 수 있음
  * 쿠키에 보관된 정보를 타인이 훔쳐갈 수 있음
  * 한 번 도용된 쿠키 정보는 계속 악용될 수 있음

* 쿠키는 탈취 문제가 제일 큼. 안그래도 쿠키에 정보 변경 마음대로 할 수 있는데, Http로 전송되는 쿠키의 경우 탈취당하여 개인정보 빼앗기기가 쉽다.
  * 그래서 나온 방안 -> 쿠키에 세션 정보 담아서 보냄 : 세션 로그인 : 이걸 한꺼번에 해주는게 HttpSession <- 개꿀

* 로그인 컨트롤러 만들 때, 하나의 컨트롤러에 메서드 구현해서 쓰고자 하는 메서드 빈으로 등록해서 사용 -> 너무 복잡하고 더러워질듯 -> 서비스마다 컨트롤러 생성

* 서비스 서로 참조하게 만들기 싫은디... -> event 이용 : 객체를 반환시키는 메서드에서는 사용할 수 없음 -> 그럼 그냥 참조? -> 순환참조 일어날듯 ..(comment -> member , member -> comment) ......-> 해결책 : 유튜브 우테코 동영상 여러개 찾아보면서 impl 구현하면 된다는 것을 깨달음.  방식은 재윤이형이 프로젝트 API 가져오는 법 한 거 비슷하게 하면 될듯.
---
## 질문 

1. 로그인, 로그아웃 시 엔트포인트 어떤식으로 설정해야하는지.
2. 쿠키, 세션, jwt 설정해주는 것을 다 서비스 단 로직에서 구현하였는데, 여러 코드 보다 보니까 컨트롤러 단에서 설정해준 것이 생각보다 많았음. 어떤 것이 맞는 건가요?? --> 레이어드 아키텍쳐 관점에서 컨트롤러단에 작성하는게 옳다는 것을 알았음.


2. 원래 공식 사이트 제대로(?) 되어있는 것만 봤는데, 다음과 같은 사이트에서 찾아봐도 되나요?? https://docs.spring.io/spring-framework/docs 
3. HandlerMethodArgumentResolver 구현하면서 패키지 구조가 엉망이 된 거 같은 느낌이 드는데, 멘토님께서는 어떤식으로 패키지 구성하시는지 궁금합니다! 
4. postman 에서 api 테스트 시, 유저 2명을 만들면 로그아웃 할 때, 한 명만 로그아웃 되는 문제 발생. 두명 다 로그아웃 하려면 결국 세션에 저장되어있는 값을 post 형식으로 받아와야 따로 로그아웃 해줄 수 있을 듯.
